---
layout: default
body_class: page-build-guide
---
{%- comment -%}
  Build Phase Layout
  Supports both: order, build_order variables for phase number
  Auto-generates prev/next navigation from site.data.build_phases
{%- endcomment -%}

{%- assign phase_order = page.order | default: page.build_order -%}
{%- assign phases = site.data.build_phases.build_phases | sort: "order" -%}

<!-- Hero Section -->
<section class="build-guide-hero bg-gradient-primary">
  <div class="container">
    <nav class="build-breadcrumb" aria-label="Breadcrumb">
      <a href="/build/">Build Guides</a>
      <span aria-hidden="true">›</span>
      <span>Phase {{ phase_order }}</span>
    </nav>
    <span class="phase-badge">Phase {{ phase_order }} of 8</span>
    <h1 class="build-guide-title">{{ page.build_title | default: page.title }}</h1>
    <p class="build-guide-description">{{ page.description }}</p>
  </div>
</section>

<!-- Guide Content -->
<section class="build-guide-content ts-section">
  <div class="container">
    <div class="guide-layout {% if page.toc %}has-toc{% endif %}">
      {% if page.toc %}
      <!-- Table of Contents -->
      <aside class="guide-toc" aria-label="Table of Contents">
        <h2 class="toc-title">On This Page</h2>
        <nav class="toc-nav" id="toc-nav">
          <!-- TOC generated by JS -->
        </nav>
      </aside>
      {% endif %}
      
      <!-- Main Content -->
      <article class="guide-article prose">
        {{ content }}
      </article>
    </div>
    
    <!-- Phase Navigation -->
    <nav class="phase-navigation" aria-label="Build Phase Navigation">
      {%- assign prev_order = phase_order | minus: 1 -%}
      {%- assign next_order = phase_order | plus: 1 -%}
      {%- assign prev_phase = nil -%}
      {%- assign next_phase = nil -%}
      
      {%- for phase in phases -%}
        {%- if phase.order == prev_order -%}
          {%- assign prev_phase = phase -%}
        {%- endif -%}
        {%- if phase.order == next_order -%}
          {%- assign next_phase = phase -%}
        {%- endif -%}
      {%- endfor -%}
      
      <div class="phase-nav-links">
        {% if prev_phase %}
        <a href="{{ prev_phase.url | relative_url }}" class="phase-nav-link phase-nav-prev">
          <span class="phase-nav-label">← Previous</span>
          <span class="phase-nav-title">Phase {{ prev_phase.order }}: {{ prev_phase.title }}</span>
        </a>
        {% else %}
        <a href="/build/" class="phase-nav-link phase-nav-prev">
          <span class="phase-nav-label">← Back</span>
          <span class="phase-nav-title">All Build Guides</span>
        </a>
        {% endif %}
        
        {% if next_phase %}
        <a href="{{ next_phase.url | relative_url }}" class="phase-nav-link phase-nav-next">
          <span class="phase-nav-label">Next →</span>
          <span class="phase-nav-title">Phase {{ next_phase.order }}: {{ next_phase.title }}</span>
        </a>
        {% else %}
        <a href="/contact/" class="phase-nav-link phase-nav-next phase-nav-cta">
          <span class="phase-nav-label">Ready to Build?</span>
          <span class="phase-nav-title">Request an Estimate</span>
        </a>
        {% endif %}
      </div>
    </nav>
  </div>
</section>

<!-- CTA Section -->
<section class="build-guide-cta bg-gradient-primary ts-section">
  <div class="container text-center">
    <h2 class="text-white">Ready to Start Your Project?</h2>
    <p class="text-white-80">Get a detailed estimate for your bathroom or shower remodel from a licensed NJ contractor who follows these standards.</p>
    <div class="cta-buttons">
      <a href="/contact/" class="btn btn-light btn-lg">Request an Estimate</a>
      <a href="tel:+16098628808" class="btn btn-outline-light btn-lg">Call (609) 862-8808</a>
    </div>
    <p class="cta-credential text-white-60">
      <small>NJ HIC #13VH10808800 • TCNA-Compliant Methods</small>
    </p>
  </div>
</section>

<style>
/* Build Guide Layout Styles */
.build-guide-hero {
  padding: var(--spacing-xl, 2rem) 0 var(--spacing-2xl, 3rem);
  background: linear-gradient(135deg, var(--color-primary, #2a5d4e) 0%, var(--color-primary-dark, #1e4a3d) 100%);
  color: #fff;
}

.build-breadcrumb {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
  margin-bottom: var(--spacing-md);
  color: rgba(255,255,255,0.7);
}

.build-breadcrumb a {
  color: rgba(255,255,255,0.9);
  text-decoration: none;
}

.build-breadcrumb a:hover {
  text-decoration: underline;
}

.phase-badge {
  display: inline-block;
  background: rgba(255,255,255,0.15);
  color: #fff;
  padding: 0.375rem 0.875rem;
  border-radius: 999px;
  font-size: 0.875rem;
  font-weight: 500;
  margin-bottom: var(--spacing-md);
}

.build-guide-title {
  font-size: clamp(1.75rem, 4vw, 2.5rem);
  font-weight: 700;
  margin-bottom: var(--spacing-sm);
  color: #fff;
}

.build-guide-description {
  font-size: 1.125rem;
  color: rgba(255,255,255,0.85);
  max-width: 700px;
  line-height: 1.6;
}

/* Guide Content */
.build-guide-content {
  padding: var(--spacing-2xl, 3rem) 0;
}

.guide-layout {
  max-width: 800px;
  margin: 0 auto;
}

.guide-layout.has-toc {
  display: grid;
  grid-template-columns: 1fr 220px;
  gap: var(--spacing-2xl);
  max-width: 1100px;
}

@media (max-width: 900px) {
  .guide-layout.has-toc {
    grid-template-columns: 1fr;
  }
  
  .guide-toc {
    order: -1;
  }
}

.guide-toc {
  position: sticky;
  top: calc(var(--header-height, 70px) + var(--spacing-lg));
  align-self: start;
}

.toc-title {
  font-size: 0.875rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-text-muted, #6b7280);
  margin-bottom: var(--spacing-md);
}

.toc-nav a {
  display: block;
  padding: 0.375rem 0;
  font-size: 0.875rem;
  color: var(--color-text-secondary, #4b5563);
  text-decoration: none;
  border-left: 2px solid transparent;
  padding-left: var(--spacing-sm);
  transition: all 0.15s ease;
}

.toc-nav a:hover,
.toc-nav a.active {
  color: var(--color-primary, #2a5d4e);
  border-left-color: var(--color-primary, #2a5d4e);
}

/* Article Prose */
.guide-article h2 {
  font-size: 1.5rem;
  font-weight: 700;
  margin: var(--spacing-2xl) 0 var(--spacing-md);
  color: var(--color-text, #1f2937);
  padding-top: var(--spacing-lg);
  border-top: 1px solid var(--color-border, #e5e7eb);
}

.guide-article h2:first-child {
  margin-top: 0;
  padding-top: 0;
  border-top: none;
}

.guide-article h3 {
  font-size: 1.25rem;
  font-weight: 600;
  margin: var(--spacing-xl) 0 var(--spacing-sm);
  color: var(--color-text, #1f2937);
}

.guide-article p,
.guide-article li {
  line-height: 1.7;
  color: var(--color-text-secondary, #374151);
}

.guide-article ul,
.guide-article ol {
  margin: var(--spacing-md) 0;
  padding-left: var(--spacing-lg);
}

.guide-article li {
  margin-bottom: var(--spacing-sm);
}

.guide-article strong {
  color: var(--color-text, #1f2937);
}

.guide-article blockquote {
  border-left: 4px solid var(--color-primary, #2a5d4e);
  margin: var(--spacing-lg) 0;
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-surface-soft, #f9fafb);
  border-radius: 0 var(--radius-md, 8px) var(--radius-md, 8px) 0;
}

.guide-article blockquote p {
  margin: 0;
  font-style: italic;
}

.guide-article table {
  width: 100%;
  border-collapse: collapse;
  margin: var(--spacing-lg) 0;
  font-size: 0.9375rem;
}

.guide-article th,
.guide-article td {
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--color-border, #e5e7eb);
  text-align: left;
}

.guide-article th {
  background: var(--color-surface-soft, #f9fafb);
  font-weight: 600;
}

/* Phase Navigation */
.phase-navigation {
  margin-top: var(--spacing-2xl);
  padding-top: var(--spacing-xl);
  border-top: 2px solid var(--color-border, #e5e7eb);
}

.phase-nav-links {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-lg);
}

@media (max-width: 600px) {
  .phase-nav-links {
    grid-template-columns: 1fr;
  }
}

.phase-nav-link {
  display: flex;
  flex-direction: column;
  padding: var(--spacing-md) var(--spacing-lg);
  background: var(--color-surface, #fff);
  border: 2px solid var(--color-border, #e5e7eb);
  border-radius: var(--radius-md, 8px);
  text-decoration: none;
  transition: all 0.2s ease;
}

.phase-nav-link:hover {
  border-color: var(--color-primary, #2a5d4e);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.phase-nav-next {
  text-align: right;
}

.phase-nav-label {
  font-size: 0.8125rem;
  color: var(--color-text-muted, #6b7280);
  margin-bottom: 0.25rem;
}

.phase-nav-title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-primary, #2a5d4e);
}

.phase-nav-cta {
  background: var(--color-primary, #2a5d4e);
  border-color: var(--color-primary, #2a5d4e);
}

.phase-nav-cta .phase-nav-label,
.phase-nav-cta .phase-nav-title {
  color: #fff;
}

.phase-nav-cta:hover {
  background: var(--color-primary-dark, #1e4a3d);
  border-color: var(--color-primary-dark, #1e4a3d);
}

/* CTA Section */
.build-guide-cta {
  padding: var(--spacing-2xl, 3rem) 0;
}

.build-guide-cta h2 {
  font-size: 1.75rem;
  margin-bottom: var(--spacing-sm);
}

.cta-buttons {
  display: flex;
  gap: var(--spacing-md);
  justify-content: center;
  flex-wrap: wrap;
  margin-top: var(--spacing-lg);
}

.cta-credential {
  margin-top: var(--spacing-lg);
}

.text-center { text-align: center; }
.text-white { color: #fff; }
.text-white-80 { color: rgba(255,255,255,0.8); }
.text-white-60 { color: rgba(255,255,255,0.6); }

.btn-light {
  background: #fff;
  color: var(--color-primary, #2a5d4e);
  border: 2px solid #fff;
}

.btn-light:hover {
  background: rgba(255,255,255,0.9);
}

.btn-outline-light {
  background: transparent;
  color: #fff;
  border: 2px solid rgba(255,255,255,0.5);
}

.btn-outline-light:hover {
  background: rgba(255,255,255,0.1);
  border-color: #fff;
}

@media (max-width: 600px) {
  .cta-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .cta-buttons .btn {
    width: 100%;
    max-width: 300px;
  }
}
</style>

<script>
// Generate TOC from h2 headings
document.addEventListener('DOMContentLoaded', function() {
  const tocNav = document.getElementById('toc-nav');
  if (!tocNav) return;
  
  const article = document.querySelector('.guide-article');
  const headings = article.querySelectorAll('h2');
  
  if (headings.length === 0) {
    tocNav.parentElement.style.display = 'none';
    return;
  }
  
  headings.forEach(function(heading, i) {
    if (!heading.id) {
      heading.id = 'section-' + (i + 1);
    }
    
    const link = document.createElement('a');
    link.href = '#' + heading.id;
    link.textContent = heading.textContent;
    tocNav.appendChild(link);
  });
  
  // Highlight active section on scroll
  const observer = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      const link = tocNav.querySelector('a[href="#' + entry.target.id + '"]');
      if (link) {
        link.classList.toggle('active', entry.isIntersecting);
      }
    });
  }, { rootMargin: '-20% 0px -60% 0px' });
  
  headings.forEach(function(h) { observer.observe(h); });
});
</script>